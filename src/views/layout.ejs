<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta http-equiv="X-UA-Compatible" content="ie=edge" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.6.1/font/bootstrap-icons.css" />

  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;900&display=swap" rel="stylesheet" />
  <link href="/css/style.css" rel="stylesheet" />
  <title>Blog Awesome</title>
</head>

<body>
  <% if (locals.error) { %>
  <div class="d-none" id="error-msg">
    <%= error %>
  </div>
  <% } %>
  <div id="message-wrap" class="position-fixed bottom-0 end-0 p-3 pb-5 mb-5 me-5" style="z-index: 11;">
    <div class="toast align-items-center text-white border-0" role="alert" aria-live="assertive" aria-atomic="true"
      data-bs-delay="3000">

    </div>
  </div>
  <%- include('navbar') %>
  <div style="background-color: #fbfbfb">
    <div class="container pb-5">
      <div class="px-5 pt-4"><%- body %></div>
    </div>
  </div>
  <%- include('footer') -%>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous">
  </script>
</body>
<script>
  let msgEl = document.querySelector('#message-wrap .toast')
  let msg = bootstrap.Toast.getOrCreateInstance(msgEl) // Returns a Bootstrap toast instance
  let error = document.getElementById('error-msg')

  window.showMessage = (message, bg) => {
    let currentBg = ''
    msgEl.classList.forEach(cls => {
      if (cls.startsWith('bg-')) {
        currentBg = cls
      }
    })
    currentBg.length && msgEl.classList.remove(currentBg)
    msgEl.classList.add(bg)
    msgEl.innerHTML = `<div class="d-flex">
          <div class="toast-body">
            ${message}
          </div>
          <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast" aria-label="Close"></button>
        </div>`
    msg.show()
  }

  if (error) {
    showMessage(error.textContent, 'bg-danger')
  }
</script>

</html>